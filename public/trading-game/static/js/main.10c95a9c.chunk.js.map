{"version":3,"sources":["factories.js","constants.js","welcome/AboutShips.js","welcome/IntroText.js","welcome/PlayingTheGame.js","welcome/WelcomePage.js","styleConstants.js","imagesByType.js","place/ShipsForSale.js","shared_components/Cargo.js","place/CargosForSale.js","place/Chandler.js","place/FuelDepot.js","stateUtils.js","actions.js","place/PlacePanel.js","ship/Cash.js","ship/Crew.js","ship/Fuel.js","ship/Food.js","ship/Hold.js","ship/ShipPanel.js","ship/ShiplessPanel.js","TimeView.js","MapPanel.js","MainPage.js","App.js","state0_places.js","state0.js","tickHandler.js","rootReducer.js","index.js"],"names":["___nextId","nextId","baseCargo","isForSale","isLoaded","shipId","labelForCargoType","oliveoil","coal","leopardwood","clockworks","kippers","fluf","shipyard","placeId","shipType","shipName","newShip","food","cargo","fuel","isFlyer","shipTypeName","basePrice","crewSize","maxFuel","speed","fuelPerMove","maxCargo","maxFood","alert","FLORIN_MARK","react_default","a","createElement","exampleShips","map","aboutShipsStyle","marginTop","shipTypeDataStyle","textAlign","border","borderRadius","margin","padding","maxWidth","tableStyle","ShipTypeData","_ref","ship","style","src","alt","AboutShips","AboutShips_ShipTypeData","key","IntroText","PlayingTheGame","wrapperStyle","background","welcomePageStyle","welcomeImageStyle","display","buttonStyle","color","fontSize","fontWeight","WelcomePage","hideWelcomePage","buttonText","ticks","textAligh","onClick","welcome_IntroText","welcome_PlayingTheGame","welcome_AboutShips","imagesByType","fishboat","albionsteamclipper","enginebarge","silverzeppelin","steamturbinehovercraft","fluff","sfsStyle","minHeight","paddingLeft","marginLeft","ShipsForSaleComponent","shipsForSale","cash","buyShip","ShipForSale","canBuy","_ref2","height","width","cargoType","paddingTop","textShadow","Cargo","empty","aCargo","price","enabled","cargoClicked","title","disabled","cargoLabel","cargoId","CargosForSaleComponent","prices","hasShip","numberOfEmptyCargoBays","cargosForSale","buyCargo","shared_components_Cargo","Chandler","place","buyFood","myShip","foodGap","visualFoodGap","i","push","isFoodForSale","foodPrice","FuelDepot","buyFuel","fuelGap","visualFuelGap","isFuelForSale","fuelPrice","getShipById","state","ships","length","Object","objectSpread","getMyShip","myShipId","getPlaceById","id","places","getCurrentPlace","currentPlaceId","getShipsForSaleHere","filter","getShipsForSale","replaceShip","newShips","s","getCargoById","cargos","getCargoForSaleHere","getCargoInPort","getCargoOnBoard","cargoCount","Math","max","showWelcomePage","showing","type","connect","dispatch","quantity","cashPlusTradeIn","name","description","place_Chandler","place_FuelDepot","cashBoxStyle","Crew","crewArr","Fuel","fuelArr","position","foodStyle","Food","foodArr","holdStyle","Hold","localPrices","sellCargo","emptyCargoBays","shipStyle","nameplateStyle","stateUtils","actions","ship_Hold","ship_Food","ship_Fuel","ship_Crew","Cash","timeViewStyle","dayStyle","bellsStyle","TimeView","days","ticksToday","mapPanelStyle","mapStyle","gridTemplateColumns","gridTemplateRows","Square","p","myPlace","isDestination","isMoving","moveShip","placeType","squareStyle","gridColumn","x","gridRow","y","backgroundPosition","arrowStyle","transform","_arrowRotation","left","top","zIndex","shipCssClass","className","_isDestination","abs","backToWelcomePageStyle","src_TimeView","MapPanel_Square","mainPageStyle","MainPage","isInPort","PlacePanel","ShipPanel","ShiplessPanel","MapPanel","showingWelcomePage","gameOver","gameOverMessage","cashToWin","startNewGame","welcome_WelcomePage","src_MainPage","basePrices","state0","timeStop","slowTimeCounter","moveEndTime","defaultPlaceId","cargoProducers","period","tickHandler","newState","doTickly","oldState","newCargos","toConsumableArray","forEach","producersProduce","currentPlace","crew","crewPerson","text","console","log","eatFood","doDaily","rootReducer","arguments","undefined","action","oldShip","newCash","c","store","createStore","ReactDOM","render","es","App","document","getElementById","setInterval"],"mappings":"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","file":"static/js/main.10c95a9c.chunk.js","sourcesContent":["/*\r\n * The cargoFactory function creates object representing various kinds of cargos,\r\n * using the minium possible input information and infering other details from the \r\n * cargoType parameter.\r\n *\r\n * The shipyard function creates ship objects,\r\n * using the minium possible input information and infering other details from the \r\n * shipType parameter.\r\n */\r\n\r\n//Unique id generator\r\nlet ___nextId = 111\r\nexport function nextId() {\r\n    return ___nextId++\r\n}\r\n\r\n//So unit tests can have predictable IDs.\r\nexport function resetNextId() {\r\n    ___nextId = 111\r\n}\r\n\r\nconst baseCargo = {isForSale: true, isLoaded: false, shipId: null}\r\n\r\nconst labelForCargoType = {\r\n    oliveoil: 'Olive oil',\r\n    coal: 'Coal',\r\n    leopardwood:'Leopard Wood',\r\n    clockworks:'Clockworks',\r\n    kippers:'Kippers',\r\n    fluf:'Fluff'\r\n}\r\nexport function cargoFactory(cargoType, placeId) {\r\n    return {...baseCargo, \r\n            cargoLabel: labelForCargoType[cargoType], \r\n            cargoId: 'cargo_' + cargoType + '_' + nextId(),\r\n            placeId: placeId,\r\n            cargoType: cargoType\r\n    }\r\n}\r\n\r\nexport function shipyard(placeId, shipType, shipName) {\r\n    let newShip = {\r\n        shipId: 'ship_' + shipType + '_' + nextId(),\r\n        placeId: placeId, \r\n        shipType: shipType, \r\n        shipName: shipName,\r\n        food:0, \r\n        cargo: [], \r\n        fuel: 0,\r\n        isForSale: true,\r\n        isFlyer: false\r\n    }\r\n    switch (shipType) {\r\n        case 'fishboat':\r\n            newShip.shipTypeName = 'Fish Boat'\r\n            newShip.basePrice = 500\r\n            newShip.crewSize = 1\r\n            newShip.maxFuel = 0\r\n            newShip.speed = 1\r\n            newShip.fuelPerMove = 0\r\n            newShip.maxCargo = 4\r\n            newShip.maxFood = 8\r\n            break\r\n        case 'albionsteamclipper':\r\n            newShip.shipTypeName = 'Albion Steam Clipper'\r\n            newShip.basePrice = 12000\r\n            newShip.crewSize = 4\r\n            newShip.maxFuel = 7\r\n            newShip.speed = 3\r\n            newShip.fuelPerMove = 1\r\n            newShip.maxCargo = 12\r\n            newShip.maxFood = 20\r\n            break\r\n        case 'enginebarge':\r\n            newShip.shipTypeName = 'Engine Barge'\r\n            newShip.basePrice = 4000\r\n            newShip.crewSize = 2\r\n            newShip.maxFuel = 7\r\n            newShip.speed = 1\r\n            newShip.fuelPerMove = 1\r\n            newShip.maxCargo = 20\r\n            newShip.maxFood = 14\r\n            break\r\n        case 'silverzeppelin':\r\n            newShip.shipTypeName = 'Silver Zeplin'\r\n            newShip.basePrice = 20000\r\n            newShip.crewSize = 2\r\n            newShip.maxFuel = 10\r\n            newShip.speed = 2\r\n            newShip.fuelPerMove = 2\r\n            newShip.maxCargo = 6\r\n            newShip.maxFood = 16\r\n            newShip.isFlyer = true\r\n            break\r\n        case 'steamturbinehovercraft':\r\n            newShip.shipTypeName = 'Steam Turbine Hovercraft'\r\n            newShip.basePrice = 5000\r\n            newShip.crewSize = 2\r\n            newShip.maxFuel = 12\r\n            newShip.speed = 3\r\n            newShip.fuelPerMove = 3\r\n            newShip.maxCargo = 4\r\n            newShip.maxFood = 10\r\n            newShip.isFlyer = true\r\n            break\r\n        default:\r\n            alert('Unknown ship type \"'+shipType+'\"')\r\n    }\r\n    return newShip\r\n}\r\n","import React from 'react'\r\n\r\n/*\r\n * Constants for magic values used multiple places in the project.\r\n *\r\n * Note that there's a separate styleConstants.js for colors and anythinng\r\n * else used for CSS which I want to keep in a single place.\r\n */\r\n\r\n/*\r\n * HTML entity for the symbol, like an \"f\" with a tail, used to represent\r\n * the unit of money used in the game.\r\n *\r\n * It's in a span because that happens to work with how I use it, and this\r\n * works around the gotcha of JSX escaping all \"dynamic\" values.\r\n */\r\nexport const FLORIN_MARK = <span>&#402;</span>\r\n","import React from 'react'\r\nimport { shipyard } from '../factories'\r\nimport { FLORIN_MARK } from '../constants'\r\n\r\n/*\r\n * This component displays an image and data sheet for every kind\r\n * of ship in the game.\r\n */\r\n\r\nconst allShipTypes = [\r\n    'fishboat', \r\n    'albionsteamclipper', \r\n    'enginebarge', \r\n    'silverzeppelin',\r\n    'steamturbinehovercraft'\r\n]\r\n\r\nconst exampleShips = allShipTypes.map((shipType)=>(shipyard('bogoPlace', shipType, 'bogoName')))\r\n\r\nconst aboutShipsStyle = {\r\n    marginTop: '50px'\r\n}\r\nconst AboutShips = () => (\r\n    <div style={aboutShipsStyle}>\r\n        <h2>Ships</h2>\r\n        <p>In case you're curious, here are all the ships and other vehicles\r\n            available in the game. Consult this if you want to calculate exactly\r\n            how much fuel or food are required for a given trip, or to understand how\r\n            much money you have to accumulate to trade up to a better vehicle.\r\n        </p>\r\n        <p>However, as long as you keep your food and fuel supplies topped up, you can \r\n            also play by just watching the UI and seeing what happens.\r\n        </p>\r\n        {exampleShips.map((ship)=>(<ShipTypeData key={ship.shipType} ship={ship} />))}\r\n    </div>\r\n)\r\n\r\nconst shipTypeDataStyle = {\r\n    textAlign: 'center',\r\n    border: '1px solid gray',\r\n    borderRadius: '20px',\r\n    margin: '20px auto',\r\n    padding: '10px',\r\n    maxWidth: '400px'\r\n}\r\nconst tableStyle = {\r\n    margin: '20px auto',\r\n}\r\nconst ShipTypeData = ({ship}) => (\r\n    <div style={shipTypeDataStyle}>\r\n        <img src={'img/' + ship.shipType + '_large.png'} alt=\"\" style={{maxWidth: '90%'}} />\r\n        <div>\r\n            <h3>{ship.shipTypeName}</h3> \r\n             <table border=\"1\" style={tableStyle}>\r\n                 <tbody>\r\n                     <tr><td>Base Price</td><td>{ship.basePrice}{FLORIN_MARK}</td></tr>\r\n                     <tr><td>Crew Size</td><td>{ship.crewSize}</td></tr>\r\n                     <tr><td>Fuel Capacity</td><td>{ship.maxFuel}</td></tr>\r\n                     <tr><td>Max Speed</td><td>{ship.speed}</td></tr>\r\n                     <tr><td>Fuel per Square Moved</td><td>{ship.fuelPerMove}</td></tr>\r\n                     <tr><td>Cargo Capacity</td><td>{ship.maxCargo}</td></tr>\r\n                     <tr><td>Food Store</td><td>{ship.maxFood}</td></tr>\r\n                 </tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n)\r\n\r\n\r\nexport default AboutShips","import React from 'react'\r\n\r\nconst IntroText = () => (\r\n    <div>\r\n        <h1>A Steampunk Trading Game</h1>\r\n\r\n        <p>This is a classic trading game. You start with some money. Buy a ship. Buy some cargo. Sail to another port. Sell\r\n        the cargo at a profit. And repeat until rich</p>\r\n\r\n        <p>Along the way, you can upgrade to bigger and faster ships so you can make money even faster.</p>\r\n\r\n        <p>But you have to be quick. Your crew is eating up your supplies. When you are in port, that costs\r\n            money. And at sea, you can starve.\r\n        </p>\r\n\r\n    </div>\r\n)\r\n\r\nexport default IntroText","import React from 'react'\r\n\r\nconst PlayingTheGame = () => (\r\n    <div>\r\n        <h2>Playing the Game</h2>\r\n\r\n        <p>You start with some money, measured in Florins. Ships are for sale in the upper left. \r\n            Click to buy one. Any ship you can afford will have a &quot;Buy&quot; button based\r\n            on your cash plus the value of your current ship.</p>\r\n\r\n        <p>Next, buy some cargo. You will learn the prices at each port as you play. But for now, there's no point in exploring\r\n            with an empty hold. Cargos for sale are shown at the bottom of the left hand panel. Any \r\n            cargo you can buy will have the local price displayed on its icon. Click to buy it and\r\n            it will automatically move to fill an empty space in your ship&apos; hold.\r\n        </p>\r\n\r\n        <p>Your ship is shown in the center column on a large screen, or scroll down to the center\r\n            of three sections on mobile.\r\n        </p>\r\n\r\n        <p>Be sure to buy rations for you and your crew. The game automatically buys rations for you when you are in port.\r\n            But if you set sail without food, you will starve before you reach the next port. Every crewmember uses one\r\n            unit of rations per day. You can click the single barrel symbol to buy one unit at a time. Or click\r\n            the group to fill your ship&apos;s capacity with a single click.\r\n        </p>\r\n\r\n        <p>When you get a ship that needs fuel, you will find that fuel works just like rations.</p>\r\n\r\n        <p>The right-most panel, or the bottom on mobile, show the map of the world.\r\n            When you are ready to set sail, click an arrow to move to an adjacent square.\r\n            Your ship will bob over the waves for a time which depends on its speed. Then it\r\n            will arrive in the new square and you will see a new set of arrows showing the\r\n            squares you can move to.\r\n        </p>\r\n\r\n        <p>When you reach another port, your cargos will display the local price which you\r\n            can sell them for. Click a cargo to sell it</p>\r\n\r\n        <p>Buy bigger and faster ships when you can. A ship will display a buy button when you become\r\n            rich enough buy it.\r\n            Note that the value of your current ship counts as a trade-in.\r\n            </p>\r\n        \r\n        <p>And when you amass a fortune of fifty thousand florins, you win!</p>\r\n   \r\n    </div>\r\n)\r\n\r\nexport default PlayingTheGame","import React from 'react'\r\nimport AboutShips from './AboutShips'\r\nimport IntroText from './IntroText'\r\nimport PlayingTheGame from './PlayingTheGame'\r\nimport {seaBlue} from '../styleConstants'\r\n\r\n/* This game has two screens: This componet displays the \"welcome\" screen, which information\r\n * the player can read before playing.\r\n * When they're ready, a button takes them to the MainPage componet for actual play.\r\n */\r\n\r\nconst wrapperStyle = {\r\n    background: seaBlue,\r\n    padding: '40px'\r\n}\r\nconst welcomePageStyle = {\r\n    maxWidth: '800px',\r\n    margin: '0px auto',\r\n    padding: '20px',\r\n    background: 'white',\r\n    borderRadius: '40px'\r\n}\r\nconst welcomeImageStyle = {\r\n    display: 'block',\r\n    margin: '0 auto',\r\n    maxWidth: '90%'\r\n}\r\nconst buttonStyle = {\r\n    color: 'white',\r\n    background: 'blue',\r\n    fontSize: '20px',\r\n    fontWeight: 'bold',\r\n    borderRadius: '10px'\r\n}\r\nconst WelcomePage = ({hideWelcomePage, ticks}) => {\r\n    const buttonText = (ticks > 0) ? 'Return to game' : 'Start the game'\r\n    return (\r\n        <div style={wrapperStyle}>\r\n            <div style={welcomePageStyle}>\r\n                <div style={{textAligh:'right'}}>\r\n                    <button style={buttonStyle} onClick={hideWelcomePage} >{buttonText} >>>></button>\r\n                </div>\r\n                <img src=\"img/albionsteamclipper_large.png\" alt=\"A ship with steam and sail\" style={welcomeImageStyle} />\r\n                <IntroText />\r\n                <PlayingTheGame />\r\n                <AboutShips />\r\n                <button style={buttonStyle} onClick={hideWelcomePage} >{buttonText} >>>></button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default WelcomePage","/*\r\n* Colors and anythig used for CSS which I want to keep in a single place.\r\n*\r\n* Note that there's a general constants.js for other kinds of magic values.\r\n*/\r\n\r\nconst seaBlue = '#88f'\r\n\r\nexport {seaBlue}\r\n","/*\r\n * Used to decouple the names and locations of image files from \r\n * the string values identifying various types of things.\r\n *\r\n * Currently includes type-string to image file mappings for ship types \r\n * and cargos. \r\n * \r\n * Note the assumption that no type name will ever appear in \r\n * two categories. Probably something to recondsider. But \r\n * a) the natural names just don't seem to overlap, and\r\n * b) they are not visible to the user so it's easy to pick names\r\n * to ensure that they don't.\r\n */\r\n\r\nexport default {\r\n    oliveoil: 'img/oliveoil.png',\r\n    fishboat: 'img/fishboat.png',\r\n    albionsteamclipper: 'img/albionsteamclipper.png',\r\n    enginebarge: 'img/enginebarge.png',\r\n    silverzeppelin: 'img/silverzeppelin.png',\r\n    steamturbinehovercraft: 'img/steamturbinehovercraft.png',\r\n    coal: 'img/coal.png',\r\n    leopardwood: 'img/leopardwood.png',\r\n    clockworks: 'img/clockworks.png',\r\n    kippers: 'img/kippers.png',\r\n    fluff: 'img/fluff.png'\r\n}","import React from 'react'\r\nimport imagesByType from '../imagesByType'\r\nimport {seaBlue} from '../styleConstants'\r\nimport {FLORIN_MARK} from '../constants'\r\n\r\n/*\r\n * This component displays all the ships which are for sale at the current seaport.\r\n * Ships which the player can afford have an active \"buy\" button.\r\n */\r\n \r\nconst sfsStyle = {\r\n    background:seaBlue, \r\n    color: 'white', \r\n    minHeight: '150px', \r\n    paddingLeft: '10px',\r\n    marginLeft: '10px'\r\n}\r\nexport default function ShipsForSaleComponent({shipsForSale, cash, buyShip}) {\r\n    return (\r\n        <div style={sfsStyle} >\r\n            <h3>Ships for Sale</h3>\r\n            {shipsForSale.map((ship)=><ShipForSale key={ship.shipId} buyShip={buyShip} ship={ship} canBuy={ship.basePrice <= cash}/>)}\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction  ShipForSale({ship, canBuy, buyShip}) {\r\n    return (\r\n        <div >\r\n            <img alt=\"\" src={imagesByType[ship.shipType]} />\r\n            {ship.shipTypeName} &nbsp;\r\n            <em>{ship.shipName}</em> &nbsp;\r\n            {ship.basePrice}{FLORIN_MARK} &nbsp;\r\n            {canBuy ? <button onClick={()=>{buyShip(ship.shipId)}}>buy</button> : ' '}\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport imagesByType from '../imagesByType'\r\nimport {FLORIN_MARK} from '../constants'\r\n\r\n\r\n/**\r\n * This component displays one unit of cargo, on the dock or in the hold.\r\n * If a price isn't null, the component can be clicked to trigger a buy or sell.\r\n * If the \"empty\" param is true, this component displays an empty cargo bay.\r\n * \r\n * empty - If true, don't show any cargo. But keep the same size and positioning.\r\n * \r\n * aCargo - will to be an object like: {isForSale: true, cargoId:'cargo1', cargoLabel: 'Olive Oil', cargoType: 'oliveoil',\r\n *                                   isLoaded: false, placeId: 'portharbor', shipId: null}\r\n * \r\n * price - the buying or selling price.\r\n * \r\n * enabled - controls whether the component is clickable\r\n * \r\n * cargoClicked - a function which expects a cargoId. A cargo-buying or cargo-selling function should be passed depending\r\n *               on where this component is used.\r\n */\r\n\r\nconst buttonStyle = (cargo) => {\r\n    return {\r\n        height:'50px',\r\n        width: '50px',\r\n        background: (cargo) ? 'url(' + imagesByType[cargo.cargoType] + ') no-repeat' : 'inherit',\r\n        paddingTop: '30px',\r\n        fontWeight: 'bold',\r\n        color: 'gold',\r\n        textShadow: '1px 1px 2px black'\r\n    }\r\n}\r\nconst Cargo = ({empty, aCargo, price, enabled, cargoClicked}) => {\r\n    if (empty) {\r\n        return (\r\n            <button title={\"empty\"} disabled style={buttonStyle(aCargo)}>\r\n                &nbsp;\r\n            </button>\r\n        )\r\n    }\r\n    if (enabled) {\r\n        return (\r\n            <button title={aCargo.cargoLabel} onClick={()=>{cargoClicked(aCargo.cargoId)}} style={buttonStyle(aCargo)}>\r\n                {price}{FLORIN_MARK}\r\n            </button>\r\n        )\r\n    } else {\r\n        return (\r\n            <button title={aCargo.cargoLabel} disabled style={buttonStyle(aCargo)}>\r\n                &nbsp;\r\n            </button>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Cargo","import React from 'react'\r\nimport Cargo from '../shared_components/Cargo'\r\n\r\n/*\r\n * This is a component displaying the cargos which are currently for sale at the current\r\n * seaport.\r\n */\r\n\r\nexport default function CargosForSaleComponent({prices, hasShip, numberOfEmptyCargoBays, cargosForSale, cash, buyCargo}) {\r\n    return (\r\n        <div >\r\n            <h3>Cargos for Sale</h3>\r\n            {cargosForSale.map((cargo)=>{\r\n                let price = prices[cargo.cargoType]\r\n                return (\r\n                    <Cargo\r\n                        key={cargo.cargoId} \r\n                        cargoClicked={buyCargo} \r\n                        aCargo={cargo} \r\n                        price={price}\r\n                        enabled={hasShip && (price <= cash) && numberOfEmptyCargoBays}\r\n                    />\r\n                )\r\n                \r\n            })}\r\n        </div>\r\n    )\r\n}\r\n\r\n","import React from 'react'\r\nimport {FLORIN_MARK} from '../constants'\r\n/*\r\n * This componet is where the player buys rations for the crew.\r\n * For convenience, it displays a button for buying a single day's rations,\r\n * and another large button which will buy exactly enough rations to fill\r\n * the player's ship's capacity to hold them.\r\n */\r\n\r\nconst Chandler = ({place, buyFood, hasShip, myShip}) => {\r\n    let foodGap = 0\r\n    let visualFoodGap = []\r\n    if (hasShip) {\r\n        foodGap = myShip.maxFood - myShip.food\r\n    }\r\n    for (let i = 0; i < foodGap; i++) {\r\n        visualFoodGap.push(<img key={i} alt=\"rations\" src=\"img/rations.png\"/>)\r\n    }\r\n    const buttonStyle = {\r\n        background: 'inherit'\r\n    }\r\n    if (place.isFoodForSale) {\r\n        return (\r\n            <div>\r\n                <h3>Buy food</h3> \r\n                {(hasShip) ? \r\n                    <div>\r\n                        <button style={buttonStyle} onClick={()=>{buyFood(place.placeId, 1)}}>\r\n                            <img alt=\"rations\" src=\"img/rations.png\"/>\r\n                            {place.foodPrice} {FLORIN_MARK}\r\n                        </button> \r\n                    </div>\r\n                :\r\n                    ''\r\n                }\r\n                {(foodGap) ? \r\n                    <div>\r\n                        <button style={buttonStyle} onClick={()=>{buyFood(place.placeId, foodGap)}}>\r\n                            {visualFoodGap}\r\n                            {place.foodPrice * foodGap}  {FLORIN_MARK}\r\n                        </button>\r\n                        </div> \r\n                : \r\n                    ''\r\n                }\r\n\r\n            </div>\r\n        ) \r\n    } else {\r\n        return <div> </div>\r\n    }\r\n}\r\n\r\nexport default Chandler\r\n","import React from 'react'\r\nimport {FLORIN_MARK} from '../constants'\r\n/*\r\n * This component is where the player buys fuel.\r\n * It has a botton to buy one unit of fuel, and another to \r\n * buy the exact amount required to max out the ship's storage\r\n * capacity.\r\n */\r\n \r\nconst FuelDepot = ({place, buyFuel, hasShip, myShip}) => {\r\n    let fuelGap = 0\r\n    let visualFuelGap = []\r\n    if (hasShip) {\r\n        fuelGap = myShip.maxFuel - myShip.fuel\r\n    }\r\n    for (let i = 0; i < fuelGap; i++) {\r\n        visualFuelGap.push(<img key={i} alt=\"fuel\" src=\"img/fuel.png\"/>)\r\n    }\r\n    const buttonStyle = {\r\n        background: 'inherit'\r\n    }\r\n    if (place.isFuelForSale) {\r\n        return (\r\n            <div>\r\n                <h3>Buy fuel</h3> \r\n                {(hasShip) ? \r\n                    <div>\r\n                        <button style={buttonStyle} onClick={()=>{buyFuel(place.placeId, 1)}}>\r\n                            <img alt=\"rations\" src=\"img/fuel.png\"/>\r\n                            {place.fuelPrice}  {FLORIN_MARK}\r\n                        </button> \r\n                    </div>\r\n                :\r\n                    ''\r\n                }\r\n                {(fuelGap) ? \r\n                    <div>\r\n                        <button style={buttonStyle} onClick={()=>{buyFuel(place.placeId, fuelGap)}}>\r\n                            {visualFuelGap}\r\n                            {place.fuelPrice * fuelGap}  {FLORIN_MARK}\r\n                        </button>\r\n                        </div> \r\n                : \r\n                    ''\r\n                }\r\n\r\n            </div>\r\n        ) \r\n    } else {\r\n        return <div> </div>\r\n    }\r\n}\r\n\r\nexport default FuelDepot\r\n","//By convention, \"get...\" functions all return new obejcts, not references to existing state.\r\n//           And \"replace...\" functions expect new objects, not references to existing state.\r\n\r\n\r\nexport function getShipById(shipId, state) {\r\n    for (let i = 0; i < state.ships.length; i++) {\r\n        if (state.ships[i].shipId === shipId) {\r\n            return {...state.ships[i]}\r\n        }\r\n    }\r\n    return null\r\n}\r\n\r\nexport function getMyShip(state) {\r\n    return state.myShipId && getShipById(state.myShipId, state)\r\n}\r\n\r\nexport function getPlaceById(id, state) {\r\n    for (let i = 0; i < state.places.length; i++) {\r\n        if (state.places[i].placeId === id) {\r\n            return {...state.places[i]}\r\n        }\r\n    }\r\n    return null\r\n}\r\n\r\nexport function replacePlace(newPlace, state) {\r\n    let newPlaces = state.places.map((p)=>( (p.placeId === newPlace.placeId) ? newPlace : p) )\r\n    return { ...state, places: newPlaces}\r\n}\r\n\r\nexport function getCurrentPlace(state) {\r\n    return getPlaceById(state.currentPlaceId, state)\r\n}\r\n\r\nexport function getShipsForSale(placeId, state) {\r\n    return state.ships.filter((ship)=>(ship.placeId === placeId && ship.isForSale))\r\n}\r\n\r\nexport function getShipsForSaleHere(state) {\r\n    return getShipsForSale(state.currentPlaceId, state)\r\n}\r\n\r\nexport function replaceShip(ship, state) {\r\n    let newShips = state.ships.map((s)=>( (s.shipId === ship.shipId) ? ship : s) )\r\n    return { ...state, ships: newShips}\r\n}\r\n\r\nexport function getCargoById(id, state) {\r\n    for (let i = 0; i < state.cargos.length; i++) {\r\n        if (state.cargos[i].cargoId === id) {\r\n            return {...state.cargos[i]}\r\n        }\r\n    }\r\n    return null\r\n}\r\n\r\nexport function getCargoInPort(placeId, state) {\r\n    return state.cargos.filter((cargo)=>(!cargo.isLoaded && cargo.placeId === placeId))\r\n}\r\n\r\nexport function getCargoForSaleHere(state) {\r\n    return getCargoInPort(state.currentPlaceId, state)\r\n}\r\n\r\nexport function getCargoOnBoard(shipId, state) {\r\n    return state.cargos.filter((cargo)=>(cargo.isLoaded && cargo.shipId === shipId))\r\n}\r\n\r\nexport function numberOfEmptyCargoBays(state) {\r\n    const myShip = getMyShip(state)\r\n    if (!myShip) {\r\n        return 0\r\n    }\r\n    const cargoCount = getCargoOnBoard(myShip.shipId, state).length\r\n    return Math.max(0, myShip.maxCargo - cargoCount)\r\n}\r\n\r\nexport function replaceCargo(cargo, state) {\r\n    let newCargos = state.cargos.map((c)=>( (c.cargoId === cargo.cargoId) ? cargo : c) )\r\n    return { ...state, cargos: newCargos}\r\n}\r\n\r\nexport function removeCargo(cargo, state) {\r\n    let newCargos = state.cargos.filter((c)=>(c.cargoId !== cargo.cargoId))\r\n    return { ...state, cargos: newCargos}\r\n}\r\n\r\n","/*\r\n * Redux action creators.\r\n *\r\n * It's a convention of this project aht all Redux action object must be created by\r\n * an action creator function. And all action creator functions must be in this file.\r\n * \r\n * I decided not to use a file of string constants for action names because those\r\n * strings are all only used in exactly two places, here and in rootReducer.js.\r\n * (And any typo is fail-fast.)\r\n */\r\n\r\nexport function tick() {\r\n\treturn {type: 'TICK'}\r\n}\r\n\r\nexport function showWelcomePage(showing) {\r\n\treturn {type: 'SHOW_WELCOME_PAGE', showing: showing}\r\n}\r\n\r\nexport function startNewGame() {\r\n\treturn {type: 'START_NEW_GAME'}\r\n}\r\n\r\nexport function buyShip(shipId) {\r\n\treturn {type: 'BUY_SHIP', shipId: shipId}\r\n}\r\n\r\nexport function buyCargo(cargoId) {\r\n\treturn {type: 'BUY_CARGO', cargoId: cargoId}\r\n}\r\n\r\nexport function buyFood(placeId, quantity) {\r\n\treturn {type: 'BUY_FOOD', placeId: placeId, quantity: quantity}\r\n}\r\n\r\nexport function buyFuel(placeId, quantity) {\r\n\treturn {type: 'BUY_FUEL', placeId: placeId, quantity: quantity}\r\n}\r\n\r\n//Also moves the player, if it's their ship.\r\nexport function moveShip(shipId, placeId) {\r\n\treturn {type: 'MOVE_SHIP', shipId:shipId, placeId: placeId}\r\n}\r\n\r\nexport function sellCargo(cargoId) {\r\n\treturn {type: 'SELL_CARGO', cargoId: cargoId}\r\n}\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport ShipsForSale from './ShipsForSale'\r\nimport CargosForSale from './CargosForSale'\r\nimport Chandler from './Chandler'\r\nimport FuelDepot from './FuelDepot'\r\nimport { getCurrentPlace, getShipsForSaleHere, getCargoForSaleHere, getMyShip, numberOfEmptyCargoBays } from '../stateUtils'\r\nimport { buyShip, buyFood, buyFuel, buyCargo } from '../actions'\r\n\r\n/*\r\n * The PlacePanel is the top level component in this directory.\r\n * It represents a seaport, and has sub-components showing things for sale,\r\n * liek ships, cargos, rations, and fuel.\r\n */\r\n\r\nconst PlacePanelComponent = (\r\n  {place, \r\n    cash, \r\n    shipsForSale, \r\n    cargosForSale, \r\n    hasShip, \r\n    myShip,\r\n    numberOfEmptyCargoBays, \r\n    buyShip, \r\n    buyFood,\r\n    buyFuel, \r\n    buyCargo}\r\n) => {\r\n    let cashPlusTradeIn = cash + (myShip?myShip.basePrice:0)\r\n    return (<div style={{ background: '#ad0' }}>\r\n      <div >\r\n        <h2>{place.name}</h2>\r\n        <h3>{place.description}</h3>\r\n      </div>\r\n      <ShipsForSale shipsForSale={shipsForSale} cash={cashPlusTradeIn} buyShip={buyShip} />\r\n      <Chandler hasShip={hasShip} place={place} myShip={myShip} buyFood={buyFood} />\r\n      <FuelDepot hasShip={hasShip} place={place} myShip={myShip} buyFuel={buyFuel} />\r\n      <CargosForSale prices={place.prices} hasShip={hasShip} numberOfEmptyCargoBays={numberOfEmptyCargoBays} cargosForSale={cargosForSale} cash={cash} buyCargo={buyCargo} />\r\n    </div>);\r\n  }\r\n\r\nconst mapStateToProps = state => ({\r\n  place: getCurrentPlace(state),\r\n  shipsForSale: getShipsForSaleHere(state),\r\n  cargosForSale: getCargoForSaleHere(state),\r\n  cash: state.cash,\r\n  hasShip: !!state.myShipId,\r\n  myShip: getMyShip(state),\r\n  numberOfEmptyCargoBays: numberOfEmptyCargoBays(state)\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  buyShip: (shipId) => { dispatch(buyShip(shipId)) },\r\n  buyFood: (placeId, quantity) => { dispatch(buyFood(placeId, quantity)) },\r\n  buyFuel: (placeId, quantity) => { dispatch(buyFuel(placeId, quantity)) },\r\n  buyCargo: (cargoId) => {dispatch(buyCargo(cargoId)) }\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(PlacePanelComponent)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\n/*\r\n * This component is the player's cash box. It displays how much money the player has\r\n */\r\n\r\nconst cashBoxStyle = {\r\n  background: 'gold',\r\n  border: '5px solid brown',\r\n  width: '150px',\r\n  textAlign: 'center',\r\n  margin: '10px auto 10px auto'\r\n}\r\nconst CashComponent = ({cash}) => (\r\n    <div style={cashBoxStyle}>\r\n        Cash: {cash} florins\r\n    </div>\r\n)\r\n\r\nconst mapStateToProps = state => ({\r\n  cash: state.cash\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps\r\n)(CashComponent)","import React from 'react'\r\n\r\n/*\r\n * A component displaying a number of crewperson images equal to the ship's crewSize.\r\n */\r\n\r\nconst Crew = ({myShip}) => {\r\n    let crewArr = []\r\n    for (let i = 0; i < myShip.crewSize; i++) {\r\n        crewArr.push(<img key={i} src=\"img/crew.png\" alt=\"crewperson\" />)\r\n    }\r\n    return (\r\n        <div style={{marginTop: '5px'}} >\r\n            {crewArr}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Crew","import React from 'react'\r\n\r\n/*\r\n * This component displays a ship's fuel stores using an image\r\n * for a unit of fuel and a different image for an available space \r\n * which is currently empty.\r\n */\r\nconst Fuel = ({myShip}) =>  {\r\n    if (!myShip.fuelPerMove) {\r\n        return <div> </div>\r\n    }\r\n    let fuelArr = []\r\n    for (let i = 0; i < myShip.fuel; i++) {\r\n        fuelArr.push(<img src=\"img/fuel.png\" alt=\"Fuel barrel\" key={i} />)\r\n    }\r\n    for (let i = 0; i < (myShip.maxFuel - myShip.fuel); i++) {\r\n        fuelArr.push(<img src=\"img/no_fuel.png\" alt=\"Empty fuel bay\" key={'e'+i} />)\r\n    }\r\n    const fuelStyle = {\r\n        border: '3px solid brown',\r\n        borderRadius: '5px',\r\n        padding: '3px',\r\n        position: 'relative',\r\n        minHeight: '50px',\r\n        marginTop: '5px'\r\n    }\r\n    return (\r\n        <div style={fuelStyle}>\r\n            {fuelArr}\r\n        </div>\r\n    )\r\n}\r\nexport default Fuel\r\n","import React from 'react'\r\n\r\n/*\r\n * This is a component which displays a ship's food stores using an image\r\n * for a day's rations and a different image for an available space for a\r\n * day's rations which is currently empty.\r\n */\r\n\r\nconst foodStyle = {\r\n    marginTop: '5px',\r\n    border: '3px solid brown',\r\n    borderRadius: '5px',\r\n    padding: '3px',\r\n    position: 'relative',\r\n    minHeight: '35px'\r\n}\r\nconst Food = ({myShip}) => {\r\n    let foodArr = []\r\n    for (let i = 0; i < myShip.food; i++) {\r\n        foodArr.push(<img src=\"img/rations.png\" alt=\"rations\" key={i} />)\r\n    }\r\n    for (let i = 0; i < (myShip.maxFood - myShip.food); i++) {\r\n        foodArr.push(<img src=\"img/no_rations.png\" alt=\"Empty rations bay\" key={'e'+i} />)\r\n    }\r\n    return (\r\n        <div style={foodStyle}>\r\n            {foodArr}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Food\r\n","import React from 'react'\r\nimport Cargo from '../shared_components/Cargo'\r\n\r\n/*\r\n * This is the component within the Ship component which displays all the\r\n * cargo on board. The Cargo component has an \"empty\" property and an empty\r\n * Cargo represents an empty cargo bay. So we always display \r\n * myShip.maxCargo Cargo components.\r\n */\r\n\r\nconst holdStyle = {\r\n    border: '3px solid brown',\r\n    borderRadius: '5px',\r\n    padding: '3px',\r\n    position: 'relative',\r\n    minHeight: '50px'\r\n}\r\nconst Hold = ({myShip, cargo, localPrices, sellCargo}) => {\r\n    const emptyCargoBays = []\r\n    for (let i = 0; i < (myShip.maxCargo - cargo.length); i++) {\r\n        emptyCargoBays.push(<Cargo key={i} empty={true} />)\r\n    }\r\n    return (\r\n        <div style={holdStyle}>\r\n                {cargo.map((aCargo)=>(\r\n                    <Cargo empty={false} key={aCargo.cargoId} cargoClicked={sellCargo} aCargo={aCargo} \r\n                           enabled={!!localPrices[aCargo.cargoType]} price={localPrices[aCargo.cargoType]} \r\n                    />\r\n                ))}\r\n                {emptyCargoBays}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Hold","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Cash from './Cash'\r\nimport Crew from './Crew'\r\nimport Fuel from './Fuel'\r\nimport Food from './Food'\r\nimport Hold from './Hold'\r\nimport * as stateUtils from '../stateUtils'\r\nimport * as actions from '../actions'\r\nimport {seaBlue} from '../styleConstants'\r\n\r\n/*\r\n * This, and ShiplessPannel, are the two components in this directory which are used\r\n * directly by code outside this directory.\r\n *\r\n * This component represents the player's ship, and has sub-components for the cargo\r\n * hold, the food store, etc.\r\n */\r\n\r\nconst shipStyle = {\r\n  background: 'tan',\r\n  margin: '20px',\r\n  borderRadius: '40px',\r\n  border: '5px solid brown',\r\n  padding: '20px 20px 5px 20px'\r\n}\r\n\r\nconst nameplateStyle = {\r\n  //background: 'white',\r\n  fontSize: '20px',\r\n  fontWeight: 'bold',\r\n  //border: '1px solid black',\r\n  width: '200px',\r\n  textAlign: 'center',\r\n  margin: '10px auto 10px auto'\r\n}\r\n\r\nconst ShipPanelComponent = ({cash, myShip, cargo, localPrices, sellCargo}) => (\r\n  <div style={{background:seaBlue}}>\r\n    <div style={shipStyle}>\r\n      <Hold myShip ={myShip} cargo={cargo} localPrices={localPrices} sellCargo={sellCargo} />\r\n      <Food myShip={myShip} />\r\n      <Fuel myShip={myShip} />\r\n      <Crew myShip={myShip} />\r\n      <Cash />\r\n      <div style={nameplateStyle}>\r\n        {\"{{{\"} <em>{myShip.shipName}</em> {\"}}}\"}\r\n      </div>\r\n    </div>\r\n  </div>\r\n)\r\n\r\nconst mapStateToProps = state => ({\r\n  cash: state.cash,\r\n  myShip: stateUtils.getMyShip(state),\r\n  cargo: stateUtils.getCargoOnBoard(state.myShipId, state),\r\n  localPrices: stateUtils.getCurrentPlace(state).prices\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  sellCargo: (cargoId) => { dispatch(actions.sellCargo(cargoId)) }\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(ShipPanelComponent)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Cash from './Cash'\r\nimport {seaBlue} from '../styleConstants'\r\n\r\n/*\r\n * This component is displayed when the player doesn't own a ship.\r\n * However, it still displays the player's \"cash box\", showing how\r\n * much money they have to spend on ship.\r\n */\r\nconst ShiplessPanelComponent = ({cash, myShip}) => (\r\n    <div style={{background: seaBlue}}>\r\n        Time to buy a ship.\r\n        <Cash />\r\n    </div>\r\n)\r\n\r\nconst mapStateToProps = state => ({\r\n  cash: state.cash,\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps\r\n)(ShiplessPanelComponent)","import React from 'react'\r\n\r\nconst timeViewStyle = {\r\n    fontWeight: 'bold',\r\n    border: '2px solid white',\r\n    borderRadius: '4px',\r\n    color: 'white',\r\n    paddingLeft: '5px',\r\n    fontSize: '16px',\r\n    width: '120px'\r\n}\r\nconst dayStyle = {\r\n    display: 'inline-block',\r\n    width: '60px',\r\n    textAlign: 'left'\r\n}\r\nconst bellsStyle = {\r\n    display: 'inline-block',\r\n    width: '50px',\r\n    textAlign: 'right'\r\n}\r\nconst TimeView = ({ticks, days, ticksToday}) => (\r\n    <div style={timeViewStyle}>\r\n        <div style={dayStyle}>Day {days}</div>\r\n        <div style={bellsStyle}>{ticksToday}:00</div>\r\n    </div>\r\n)\r\n\r\nexport default TimeView\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport TimeView from './TimeView'\r\nimport * as stateUtils from './stateUtils'\r\nimport * as actions from './actions'\r\nimport {seaBlue} from './styleConstants'\r\nimport imagesByType from './imagesByType'\r\n\r\n/*\r\n * This component draws the entire map, creating a square for each element in state.places.\r\n */\r\n\r\nlet mapPanelStyle = {\r\n    border: '1px solid blue',\r\n    padding: '10px',\r\n    background: seaBlue\r\n}\r\n\r\nconst mapStyle = {\r\n    display: 'grid',\r\n    gridTemplateColumns: 'repeat(4, 100px)',\r\n    gridTemplateRows: 'repeat(8, 100px)',\r\n    fontWeight: 'bold'\r\n}\r\n\r\nconst Square = ({p, myShip, myPlace, isDestination, isMoving, moveShip}) => {\r\n    const moveHandler = () => {\r\n        if (isDestination) {\r\n            moveShip(myShip.shipId, p.placeId)\r\n        }\r\n    }\r\n    let background = 'inherit'\r\n    if (p.placeType === 'LAND') {\r\n        background = '#db8'\r\n    }\r\n    if (p.placeType === 'PORT') {\r\n        background = '#ad0 no-repeat url(\"img/port.png\")'\r\n    }\r\n    let border = '1px solid blue'\r\n    if (isDestination && !isMoving) {\r\n        border = '1px solid yellow'\r\n    }\r\n    let squareStyle = {\r\n        border:border, \r\n        background: background,\r\n        gridColumn: p.x, \r\n        gridRow: p.y, \r\n        margin:'0px',\r\n        position: 'relative',\r\n        backgroundPosition: 'center'\r\n    }\r\n    let arrowStyle = {\r\n        transform: 'rotate('+_arrowRotation(p, myPlace)+'deg)',\r\n        left: '25px',\r\n        top: '25px',\r\n        zIndex: 10,\r\n        position: 'absolute'\r\n    }\r\n    let shipStyle={\r\n        left: '18px',\r\n        top: '18px',\r\n        zIndex: 5,\r\n        position: 'absolute',\r\n        border: 'none'\r\n    }\r\n    let shipCssClass = isMoving ? 'bobbing' : 'notbobbing'\r\n    return (\r\n        <div style={squareStyle} \r\n             key={p.placeId}\r\n             onClick={moveHandler}\r\n        >\r\n            {p.placeType === 'PORT' ? p.name : ''}\r\n            {(myShip && (myShip.placeId === p.placeId)) ? <img className={shipCssClass} style={shipStyle} alt={myShip.shipName} src={imagesByType[myShip.shipType]} /> : <span> </span>} \r\n            {(isDestination && !isMoving) ? <img style={arrowStyle} src=\"img/arrow_up.png\" alt=\"You can move to here\" /> : <span> </span>}\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction _isDestination(place, myPlace, myShip) {\r\n    //True if they are one square apart (not diagonal), and place is a port or sea square,\r\n    // and you are not going overland from port to port\r\n    return (\r\n        (place.placeType === 'PORT' || place.placeType === 'AT_SEA' || myShip.isFlyer) && \r\n        (!(myPlace.placeType === 'PORT' && place.placeType === 'PORT') || myShip.isFlyer) &&\r\n        ((Math.abs(place.x - myPlace.x) + Math.abs(place.y - myPlace.y)) === 1)\r\n    )\r\n}\r\n\r\n//For a given place and the player's ships place, compute the degrees rotation\r\n// from verticle for an arrow pointing away from the ship.\r\nfunction _arrowRotation(place, myPlace) {\r\n    if (myPlace.y > place.y) {\r\n        return 0\r\n    }\r\n    if (myPlace.x > place.x) {\r\n        return 270\r\n    }\r\n    if (myPlace.x < place.x) {\r\n        return 90\r\n    }\r\n    //my y < y, arrow stays pointing up\r\n    return 180\r\n}\r\n\r\nconst backToWelcomePageStyle = {\r\n    color: 'white',\r\n    background: 'blue',\r\n    fontSize: '16px',\r\n    borderRadius: '10px'\r\n}\r\nconst MapPanelComponent = ({\r\n        ticks, days, ticksToday, places, myShip, myPlace, isMoving, moveShip, showWelcomePage\r\n    }) => {\r\n    return (\r\n        <div style={mapPanelStyle}>\r\n            <div style={{display:'inline-block', width:'200px'}}>\r\n                <TimeView \r\n                    days={days} \r\n                    ticks={ticks} \r\n                    ticksToday={ticksToday}\r\n                />\r\n            </div>\r\n            <button onClick={showWelcomePage} style={backToWelcomePageStyle}>&lt;&lt; Back to home page</button>\r\n            <div style={mapStyle}>\r\n                {places.map((p)=>(<Square key={p.placeId} \r\n                                          p={p} \r\n                                          myShip={myShip} \r\n                                          myPlace={myPlace}\r\n                                          isMoving={isMoving}\r\n                                          isDestination={myShip && _isDestination(p, myPlace, myShip)}\r\n                                          moveShip={moveShip} \r\n                                  />\r\n                ))}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst mapStateToProps = state => ({\r\n  days: state.days,\r\n  ticks: state.ticks,\r\n  ticksToday: state.ticksToday,\r\n  places: state.places,\r\n  myShip: stateUtils.getMyShip(state),\r\n  myPlace: stateUtils.getCurrentPlace(state),\r\n  isMoving: state.isMoving\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    moveShip: (shipId, placeId) => { dispatch(actions.moveShip(shipId, placeId)) }\r\n  })\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(MapPanelComponent)","import React from 'react'\r\nimport PlacePanel from './place/PlacePanel'\r\nimport ShipPanel from './ship/ShipPanel'\r\nimport ShiplessPanel from './ship/ShiplessPanel'\r\nimport MapPanel from './MapPanel'\r\nimport {seaBlue} from './styleConstants'\r\n\r\nconst mainPageStyle = {\r\n    display: 'grid',\r\n    gridTemplateColumns: '1fr 1fr 1fr'\r\n}\r\n\r\nconst MainPage = ({showWelcomePage, hasShip, isInPort}) => (\r\n    <div style={mainPageStyle}>\r\n        {isInPort ? <PlacePanel /> : <div style={{background:seaBlue}}> </div>}\r\n        {hasShip ? <ShipPanel /> : <ShiplessPanel />}\r\n        <MapPanel showWelcomePage={showWelcomePage} />\r\n    </div>\r\n)\r\n\r\nexport default MainPage","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport WelcomePage from './welcome/WelcomePage'\r\nimport MainPage from './MainPage'\r\nimport { showWelcomePage, startNewGame } from './actions'\r\nimport * as stateUtils from './stateUtils'\r\n\r\n/*\r\n * This is the absolute top level component of this project.\r\n * It can dispay the WelcomePage component, the MainPage component for actually playing the game,\r\n * or a simple \"Game Over\" screen.\r\n * \r\n * This component is used by index.js.\r\n */\r\n\r\nconst AppComponent = ({\r\n    showingWelcomePage, \r\n    showWelcomePage, \r\n    hideWelcomePage, \r\n    hasShip, \r\n    isInPort, \r\n    gameOver, \r\n    gameOverMessage, \r\n    cash, \r\n    cashToWin, \r\n    startNewGame, \r\n    ticks, \r\n    days, \r\n    ticksToday\r\n}) => {\r\n    if (gameOver) {\r\n        return (\r\n            <div className=\"App\" style={{textAlign:'center'}}>\r\n                <br /><br /><br />\r\n                <h1>Game Over: {gameOverMessage}</h1>\r\n                <button onClick={startNewGame}>Start a new game</button>\r\n            </div>\r\n        )\r\n    }\r\n    if (cash >= cashToWin) {\r\n        return (\r\n            <div className=\"App\" style={{textAlign:'center'}}>\r\n                <br /><br /><br />\r\n                <h1>Fifty thousand florins!</h1>\r\n                <h1>Achieved on day {days} at {ticksToday}:00.</h1>\r\n                <h1>You Win !!!!!!!!!!!!!!!!</h1>\r\n                <button onClick={startNewGame}>Start a new game</button>\r\n            </div>\r\n        )\r\n    }\r\n    if (showingWelcomePage) {\r\n        return <div className=\"App\"><WelcomePage hideWelcomePage={hideWelcomePage} ticks={ticks} /></div>\r\n    }\r\n    return <div className=\"App\"><MainPage showWelcomePage={showWelcomePage} hasShip={hasShip} isInPort={isInPort} /></div>\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  showingWelcomePage: state.showingWelcomePage,\r\n  hasShip: !!state.myShipId,\r\n  isInPort: stateUtils.getCurrentPlace(state).placeType === 'PORT',\r\n  gameOver: state.gameOver,\r\n  gameOverMessage: state.gameOverMessage,\r\n  ticks: state.ticks,\r\n  days: state.days,\r\n  ticksToday: state.ticksToday,\r\n  cash: state.cash,\r\n  cashToWin: state.cashToWin\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  showWelcomePage: () => dispatch(showWelcomePage(true)),\r\n  hideWelcomePage: () => dispatch(showWelcomePage(false)),\r\n  startNewGame: () => dispatch(startNewGame())\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(AppComponent)","//Used in state0.js\r\n\r\n//Every place has a prices object. If place.prices[cargoType] isn't defined, there's no market for \r\n//  that cargoType at that place. If it is defined, the prices is both the buying and selling price\r\n\r\nconst  basePrices = {\r\n    oliveoil: 100,\r\n    coal: 50,\r\n    leopardwood: 200,\r\n    clockworks: 300,\r\n    kippers: 100,\r\n    fluff: 10\r\n}\r\n\r\nconst places = [\r\n    {\r\n        name: 'Ocean', placeId: 'wet_1_1', placeType: 'AT_SEA', description: 'At sea', isFuelForSale: false, fuelPrice:-1, isFoodForSale: false, foodPrice: -1,\r\n        x: 1,\r\n        y: 1,\r\n        prices: {}\r\n    },\r\n    {\r\n        name: 'Ocean', placeId: 'wet_1_2', placeType: 'AT_SEA', description: 'At sea', isFuelForSale: false, fuelPrice:-1,  isFoodForSale: false, foodPrice: -1,\r\n        x: 1,\r\n        y: 2,\r\n        prices: {}\r\n    },\r\n    {\r\n        name: 'Ocean', placeId: 'wet_1_3', placeType: 'AT_SEA', description: 'At sea', isFuelForSale: false, fuelPrice:-1,  isFoodForSale: false, foodPrice: -1,\r\n        x: 1,\r\n        y: 3,\r\n        prices: {}\r\n    },\r\n    {\r\n        name: 'Ocean', placeId: 'wet_1_4', placeType: 'AT_SEA', description: 'At sea', isFuelForSale: false, fuelPrice:-1,  isFoodForSale: false, foodPrice: -1,\r\n        x: 1,\r\n        y: 4,\r\n        prices: {}\r\n    },\r\n    {\r\n        name: 'Ocean', placeId: 'wet_1_5', placeType: 'AT_SEA', description: 'At sea',  isFuelForSale: false, fuelPrice:-1, isFoodForSale: false, foodPrice: -1,\r\n        x: 1,\r\n        y: 5,\r\n        prices: {}\r\n    },\r\n    {\r\n        name: 'Ocean', placeId: 'wet_1_6', placeType: 'AT_SEA', description: 'At sea', isFuelForSale: false, fuelPrice:-1,  isFoodForSale: false, foodPrice: -1,\r\n        x: 1,\r\n        y: 6,\r\n        prices: {}\r\n    },\r\n    {\r\n        name: 'Ocean', placeId: 'wet_1_7', placeType: 'AT_SEA', description: 'At sea', isFuelForSale: false, fuelPrice:-1,  isFoodForSale: false, foodPrice: -1,\r\n        x: 1,\r\n        y: 7,\r\n        prices: {}\r\n    },\r\n    {\r\n        name: 'Ocean', placeId: 'wet_1_8', placeType: 'AT_SEA', description: 'At sea', isFuelForSale: false, fuelPrice:-1,  isFoodForSale: false, foodPrice: -1,\r\n        x: 1,\r\n        y: 8,\r\n        prices: {}\r\n    },\r\n    {\r\n        name: 'Ocean', placeId: 'wet_2_1', placeType: 'AT_SEA', description: 'At sea', isFuelForSale: false, fuelPrice:-1,  isFoodForSale: false, foodPrice: -1,\r\n        x: 2,\r\n        y: 1,\r\n        prices: {}\r\n    },\r\n    {\r\n        name: 'Point A', placeId: 'pointa', placeType: 'PORT', description: 'Not far frmo Point B', isFuelForSale: true, fuelPrice:10,  isFoodForSale: true, foodPrice: 5,\r\n        x: 2,\r\n        y: 2,\r\n        prices: {...basePrices, fluff:70, clockworks:100}\r\n    },\r\n    {\r\n        name: 'Third Place',\r\n        placeId: 'thirdplace',\r\n        placeType: 'PORT',\r\n        description: 'Not home or work',\r\n        isFuelForSale: true, fuelPrice:10, \r\n        isFoodForSale: true,\r\n        foodPrice: 15,\r\n        x: 2,\r\n        y: 3,\r\n        prices: {...basePrices, fluff:70, leopardwood:30}\r\n    },\r\n    {\r\n        name: 'Land', placeId: 'dry_2_4', placeType: 'LAND', description: 'Land', isFuelForSale: false, fuelPrice:-1,  isFoodForSale: false, foodPrice: -1,\r\n        x: 2,\r\n        y: 4,\r\n        prices: {}\r\n    },\r\n    {\r\n        name: 'Port Harbor',\r\n        placeId: 'portharbor',\r\n        placeType: 'PORT',\r\n        description: 'A nice little fishing village',\r\n        isFuelForSale: true, fuelPrice:10, \r\n        isFoodForSale: true,\r\n        foodPrice: 5,\r\n        x: 2,\r\n        y: 5,\r\n        prices: {...basePrices, kippers: 5, oliveoil:10}\r\n    },\r\n    {\r\n        name: 'Land', placeId: 'dry_2_6', placeType: 'LAND', description: 'Land', isFuelForSale: false, fuelPrice:-1,  isFoodForSale: false, foodPrice: -1,\r\n        x: 2,\r\n        y: 6,\r\n        prices: {}\r\n    },\r\n    {\r\n        name: 'Nether',\r\n        placeId: 'nether',\r\n        placeType: 'PORT',\r\n        description: 'A southern region',\r\n        isFuelForSale: true, fuelPrice:10, \r\n        isFoodForSale: true,\r\n        foodPrice: 10,\r\n        x: 2,\r\n        y: 7,\r\n        prices: {...basePrices, coal:10}\r\n    },\r\n    {\r\n        name: 'Ocean', placeId: 'wet_2_8', placeType: 'AT_SEA', description: 'At sea', isFuelForSale: false, fuelPrice:-1,  isFoodForSale: false, foodPrice: -1,\r\n        x: 2,\r\n        y: 8,\r\n        prices: {}\r\n    },\r\n    {\r\n        name: 'Ocean', placeId: 'wet_3_1', placeType: 'AT_SEA', description: 'At sea', isFuelForSale: false, fuelPrice:-1,  isFoodForSale: false, foodPrice: -1,\r\n        x: 3,\r\n        y: 1,\r\n        prices: {}\r\n    },\r\n    {\r\n        name: 'Point B', placeId: 'pointb', placeType: 'PORT', description: 'Not far frmo Point A', isFuelForSale: true, fuelPrice:10,  isFoodForSale: true, foodPrice: 5,\r\n        x: 3,\r\n        y: 2,\r\n        prices: {...basePrices, fluff:70}\r\n    },\r\n    {\r\n        name: 'Land', placeId: 'dry_3_3', placeType: 'LAND', description: 'Land', isFuelForSale: false, fuelPrice:-1,  isFoodForSale: false, foodPrice: -1,\r\n        x: 3,\r\n        y: 3,\r\n        prices: {}\r\n    },\r\n    {\r\n        name: 'Land', placeId: 'dry_3_4', placeType: 'LAND', description: 'Land', isFuelForSale: false, fuelPrice:-1,  isFoodForSale: false, foodPrice: -1,\r\n        x: 3,\r\n        y: 4,\r\n        prices: {}\r\n    },\r\n    {\r\n        name: 'Heck', placeId: 'heck', placeType: 'PORT', description: 'It\\'s all going to here.', isFuelForSale: true, fuelPrice:10,  isFoodForSale: true, foodPrice: 5,\r\n        x: 3,\r\n        y: 5,\r\n        prices: {...basePrices, coal:10}\r\n    },\r\n    {\r\n        name: 'Land', placeId: 'dry_3_6', placeType: 'LAND', description: 'Land', isFuelForSale: false, fuelPrice:-1,  isFoodForSale: false, foodPrice: -1,\r\n        x: 3,\r\n        y: 6,\r\n        prices: {}\r\n    },\r\n    {\r\n        name: 'Gibber', placeId: 'gibber', placeType: 'PORT', description: 'Home of a popular language.', isFuelForSale: true, fuelPrice:10,  isFoodForSale: true, foodPrice: 5,\r\n        x: 3,\r\n        y: 7,\r\n        prices: {...basePrices, fluff:2}\r\n    },\r\n    {\r\n        name: 'Ocean', placeId: 'wet_3_8', placeType: 'AT_SEA', description: 'At sea', isFuelForSale: false, fuelPrice:-1,  isFoodForSale: false, foodPrice: -1,\r\n        x: 3,\r\n        y: 8,\r\n        prices: {}\r\n    },\r\n    {\r\n        name: 'Ocean', placeId: 'wet_4_1', placeType: 'AT_SEA', description: 'At sea', isFuelForSale: false, fuelPrice:-1,  isFoodForSale: false, foodPrice: -1,\r\n        x: 4,\r\n        y: 1,\r\n        prices: {}\r\n    },\r\n    {\r\n        name: 'Ocean', placeId: 'wet_4_2', placeType: 'AT_SEA', description: 'At sea', isFuelForSale: false, fuelPrice:-1,  isFoodForSale: false, foodPrice: -1,\r\n        x: 4,\r\n        y: 2,\r\n        prices: {}\r\n    },\r\n    {\r\n        name: 'Ocean', placeId: 'wet_4_3', placeType: 'AT_SEA', description: 'At sea', isFuelForSale: false, fuelPrice:-1,  isFoodForSale: false, foodPrice: -1,\r\n        x: 4,\r\n        y: 3,\r\n        prices: {}\r\n    },\r\n    {\r\n        name: 'Ocean', placeId: 'wet_4_4', placeType: 'AT_SEA', description: 'At sea', isFuelForSale: false, fuelPrice:-1,  isFoodForSale: false, foodPrice: -1,\r\n        x: 4,\r\n        y: 4,\r\n        prices: {}\r\n    },\r\n    {\r\n        name: 'Ocean', placeId: 'wet_4_5', placeType: 'AT_SEA', description: 'At sea', isFuelForSale: false, fuelPrice:-1,  isFoodForSale: false, foodPrice: -1,\r\n        x: 4,\r\n        y: 5,\r\n        prices: {}\r\n    },\r\n    {\r\n        name: 'Ocean', placeId: 'wet_4_', placeType: 'AT_SEA', description: 'At sea', isFuelForSale: false, fuelPrice:-1,  isFoodForSale: false, foodPrice: -1,\r\n        x: 4,\r\n        y: 6,\r\n        prices: {}\r\n    },\r\n    {\r\n        name: 'Ocean', placeId: 'wet_4_7', placeType: 'AT_SEA', description: 'At sea', isFuelForSale: false, fuelPrice:-1,  isFoodForSale: false, foodPrice: -1,\r\n        x: 4,\r\n        y: 7,\r\n        prices: {}\r\n    },\r\n    {\r\n        name: 'Ocean', placeId: 'wet_4_8', placeType: 'AT_SEA', description: 'At sea', isFuelForSale: false, fuelPrice:-1,  isFoodForSale: false, foodPrice: -1,\r\n        x: 4,\r\n        y: 8,\r\n        prices: {}\r\n    }\r\n]\r\n\r\nexport default places\r\n","import { shipyard } from './factories'\r\nimport places from './state0_places'\r\n\r\n/*\r\n * This is the initial state used by React/Redux.\r\n *\r\n * The top level of this object has info about:\r\n *     The player's character and ship\r\n *     Time in the game\r\n *     An array containing all the ship objects in the world\r\n *     An array containing all the cargo objects in the world\r\n *     An array of \"cargo producers\" which specify how often\r\n *             cargos of various types appear in various places\r\n *     An array of \"place\" objects, imported from state0_places.js.\r\n *        Each place objects defines a square on the map.\r\n */\r\n\r\nconst state0 = {\r\n    showingWelcomePage: true,\r\n    timeStop: true,\r\n    slowTimeCounter: 0,\r\n    gameOver: false,\r\n    gameOverMessage: '',\r\n    ticks: 0,\r\n    days: 0,\r\n    ticksToday: 0,\r\n    isMoving: false,\r\n    moveEndTime: null,\r\n    cash: 800,\r\n    cashToWin: 50000,\r\n    currentPlaceId: 'portharbor',\r\n    defaultPlaceId: 'portharbor',\r\n    myShipId: null,\r\n    ships: [\r\n        shipyard('portharbor', 'fishboat', 'Fishy'),\r\n        shipyard('portharbor', 'albionsteamclipper', 'Clippy'),\r\n        shipyard('heck', 'enginebarge', 'Grummpy'),\r\n        shipyard('pointa', 'silverzeppelin', 'Puffy'),\r\n        shipyard('gibber', 'steamturbinehovercraft', 'Zippy'),\r\n    ],\r\n    places: places,\r\n    cargos: [\r\n        {isForSale: true, cargoId:'cargo1', cargoLabel: 'Olive Oil', cargoType: 'oliveoil', isLoaded: false, placeId: 'portharbor', shipId: null},\r\n        {isForSale: true, cargoId:'cargo2', cargoLabel: 'Kippers', cargoType: 'kippers', isLoaded: false, placeId: 'portharbor', shipId: null}\r\n    ],\r\n    cargoProducers: [\r\n        {placeId: 'portharbor', period: 3, cargoType: 'oliveoil', quantity: 1},\r\n        {placeId: 'gibber', period: 3, cargoType: 'fluff', quantity: 1},\r\n        {placeId: 'heck', period: 3, cargoType: 'coal', quantity: 1},\r\n        {placeId: 'portharbor', period: 3, cargoType: 'kippers', quantity: 1},\r\n        {placeId: 'pointa', period: 3, cargoType: 'clockworks', quantity: 1},\r\n        {placeId: 'thirdplace', period: 3, cargoType: 'leopardwood', quantity: 1},\r\n        {placeId: 'nether', period: 2, cargoType: 'coal', quantity: 1},\r\n    ]\r\n}\r\n\r\nexport default state0","import * as stateUtils from './stateUtils'\r\nimport * as factories from './factories'\r\n\r\nexport default function tickHandler(state) {\r\n    let newState = {...state}\r\n\r\n    //Check victory condition\r\n    if (newState.cash >= newState.cashToWin) {\r\n        newState.timeStop = true\r\n        return newState\r\n    }\r\n\r\n    //Slow time by 20x when in port or deciding where to move next at sea,\r\n    //    i.e. when state.isMoving is false.\r\n    if (!state.isMoving) {\r\n        if (state.slowTimeCounter <= 4) {\r\n            return {...state, slowTimeCounter: state.slowTimeCounter + 1}\r\n        } else {\r\n            newState.slowTimeCounter = 0\r\n        }\r\n    }\r\n\r\n    //A day is 24 ticks.\r\n    //state contains ticks, days, and ticksToday for other logic to use.\r\n    //ticksToday rolls back to zero at the end of each day, like a clock. While ticks just\r\n    //  keeps rising.\r\n    newState = {...newState, ticks: state.ticks + 1, ticksToday: state.ticksToday + 1}\r\n    newState = doTickly(newState)\r\n    if (newState.ticksToday === 24) {\r\n        newState.days = newState.days + 1\r\n        newState.ticksToday = 0\r\n        newState = doDaily(newState)\r\n    }\r\n    return newState\r\n}\r\n\r\nfunction doTickly(s) {\r\n    return checkMoveCompleted(s)\r\n}\r\n\r\nfunction checkMoveCompleted(state) {\r\n    if (state.isMoving && (state.ticks >= state.moveEndTime)) {\r\n        return {...state, isMoving:false, moveEndTime:null}\r\n    } else {\r\n        return state\r\n    }\r\n}\r\n\r\nfunction doDaily(state) {\r\n    return producersProduce(eatFood(state))\r\n}\r\n\r\nfunction eatFood(s) {\r\n    let cash = s.cash\r\n    let currentPlace = stateUtils.getCurrentPlace(s)\r\n    let isFoodForSale = currentPlace.isFoodForSale\r\n    let foodPrice = isFoodForSale ? currentPlace.foodPrice : -1\r\n    //No ship. Player buys food for self each day.\r\n    if (!s.myShipId) {\r\n        if (isFoodForSale && (cash >= foodPrice)) {\r\n            floatNote('Buying food.')\r\n            return {...s, cash: cash - foodPrice}\r\n        } else {\r\n            return {...s, cash: cash - foodPrice, gameOver: true}\r\n        }\r\n    //Player has a ship...\r\n    } else {\r\n        let myShip = stateUtils.getMyShip(s)\r\n        //Assume ship always has a full crew\r\n        let crew = myShip.crewSize\r\n\r\n        //Loop once for each person in the crew. Try to get a food each time.\r\n        for (let crewPerson = 1; crewPerson <= crew; crewPerson++) {\r\n            if (myShip.food >= 1) {\r\n                myShip.food = myShip.food - 1\r\n                s = stateUtils.replaceShip(myShip, s)\r\n            } else {\r\n                if (isFoodForSale && (cash >= foodPrice)) {\r\n                    s = {...s, cash: cash - foodPrice}\r\n                } else {\r\n                    s = {...s, gameOver: true, gameOverMessage: 'You starved.'}\r\n                }\r\n            }\r\n        }\r\n        return s\r\n    }\r\n}\r\n\r\n//Powers state.cargoProducers, which look like:\r\n//    {placeId: 'portharbor', period: 2, cargoType: 'oliveoil', quantity: 1}\r\n//Updates state.cargos, which look like:\r\n//    {isForSale: true, cargoId:'cargo1', cargoLabel: 'Olive Oil', \r\n//       cargoType: 'oliveoil', cargoPrice: 50, isLoaded: false, placeId: 'portharbor', \r\n//       shipId: null},\r\nfunction producersProduce(oldState) {\r\n    let newCargos = [ ...oldState.cargos]\r\n    oldState.cargoProducers.forEach((p)=>{\r\n        if (!(oldState.days % p.period)) {\r\n            for (let i = 0; i < p.quantity; i++) {\r\n                newCargos.push(factories.cargoFactory(p.cargoType, p.placeId))\r\n            }\r\n        }\r\n    })\r\n    return {...oldState, cargos: newCargos}\r\n}\r\n\r\nfunction floatNote(text) {\r\n    console.log('FloatNote: ' + text)\r\n}","import state0 from './state0'\r\nimport * as stateUtils from './stateUtils'\r\nimport tickHandler from './tickHandler'\r\n\r\n/*\r\n * Redux reducer function\r\n*/\r\n\r\nfunction rootReducer(state = state0, action) {\r\n\r\n    //See actions. Might remove this later.\r\n    //But never show TICKs. There are too many.\r\n    if (action.type !== 'TICK') {\r\n        //console.log(action)\r\n        //console.log(state)\r\n    }\r\n    \r\n    switch (action.type) {\r\n\r\n        //Note: The convention is that get functions in stateUtils return shallow copies, not objects from state\r\n        //  and replace functions expect new objects that can be safely returned from the reducer\r\n\r\n        case 'TICK':\r\n            if (state.timeStop) {\r\n                return state\r\n            }\r\n            return tickHandler(state)\r\n\r\n  \t    case 'SHOW_WELCOME_PAGE':\r\n            return {...state, showingWelcomePage: action.showing, timeStop: action.showing}\r\n\r\n        case 'START_NEW_GAME':\r\n            return state0\r\n\r\n        case 'BUY_SHIP':\r\n            let ship = stateUtils.getShipById(action.shipId, state)\r\n            let oldShip = stateUtils.getMyShip(state)\r\n            let newCash = state.cash + (oldShip?oldShip.basePrice:0) - ship.basePrice\r\n            //Abort if I don't have the money.\r\n            if (newCash < 0) {\r\n                return state\r\n            }\r\n            ship.isForSale = false\r\n            let newState = stateUtils.replaceShip(ship, state)\r\n            newState.myShipId = ship.shipId\r\n            newState.cash = newCash\r\n            if (oldShip) {\r\n                oldShip.isForSale = true\r\n                newState = stateUtils.replaceShip(oldShip, newState)\r\n            }\r\n            return newState\r\n\r\n        case 'BUY_FOOD': { //action.placeId, action.quantity\r\n            let myShip = stateUtils.getMyShip(state)\r\n            //Bail out if there's no room for more food\r\n            if (myShip.food + action.quantity > myShip.maxFood) {\r\n                return state\r\n            }\r\n            //Bail if you can't afford it\r\n            let newCash = state.cash - stateUtils.getCurrentPlace(state).foodPrice * action.quantity\r\n            if (newCash < 0) {\r\n                return state\r\n            }\r\n            //Add food to your ship\r\n            myShip.food += action.quantity\r\n            let newState = stateUtils.replaceShip(myShip, state)\r\n            newState.cash = newCash\r\n            return newState\r\n        }\r\n\r\n        case 'BUY_FUEL': { //action.placeId, action.quantity\r\n            let myShip = stateUtils.getMyShip(state)\r\n            //Bail out if there's no room for more fuel\r\n            if (myShip.fuel + action.quantity > myShip.maxFuel) {\r\n                return state\r\n            }\r\n            //Bail if you can't afford it\r\n            let newCash = state.cash - stateUtils.getCurrentPlace(state).fuelPrice * action.quantity\r\n            if (newCash < 0) {\r\n                return state\r\n            }\r\n            //Add food to your ship\r\n            myShip.fuel += action.quantity\r\n            let newState = stateUtils.replaceShip(myShip, state)\r\n            newState.cash = newCash\r\n            return newState\r\n        }\r\n\r\n        case 'BUY_CARGO': {\r\n            let cargo = stateUtils.getCargoById(action.cargoId, state)\r\n            let newCash = state.cash - stateUtils.getPlaceById(cargo.placeId, state).prices[cargo.cargoType]\r\n            if (newCash <= 0) {\r\n                return state\r\n            }\r\n            cargo.isForSale = false\r\n            cargo.isLoaded = true\r\n            cargo.placeId = null\r\n            cargo.shipId = stateUtils.getMyShip(state).shipId\r\n            let newState = stateUtils.replaceCargo(cargo, state)\r\n            newState.cash = newCash\r\n            return newState\r\n        }\r\n\r\n        case 'MOVE_SHIP': {\r\n            //action.shipId, action.placeId\r\n            \r\n            //You can't start a new move until the current move finishes\r\n            if (state.isMoving) {\r\n                return state\r\n            }\r\n            let newShip = stateUtils.getShipById(action.shipId, state)\r\n            //Bail if we don't have enough fuel\r\n            if (newShip.fuel < newShip.fuelPerMove) {\r\n                return state;\r\n            }\r\n            let newState = {...state, isMoving:true, moveEndTime:state.ticks+(24/newShip.speed)}\r\n            //If player is aboard, the player also moves.\r\n            if (newState.myShipId === action.shipId) {\r\n                newState.currentPlaceId = action.placeId\r\n            }\r\n            newShip.placeId = action.placeId\r\n            newShip.fuel -= newShip.fuelPerMove\r\n            let newerState = stateUtils.replaceShip(newShip, newState)\r\n            return newerState\r\n        }\r\n\r\n        case 'SELL_CARGO': {\r\n            let cargo = stateUtils.getCargoById(action.cargoId, state)\r\n            let newCash = state.cash + stateUtils.getCurrentPlace(state).prices[cargo.cargoType]\r\n            let newState = stateUtils.removeCargo(cargo, state)\r\n            newState.cash = newCash\r\n            return newState\r\n        }\r\n            \r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default rootReducer\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n//import * as serviceWorker from './serviceWorker';\r\n\r\nimport { createStore } from 'redux'\r\nimport { Provider } from 'react-redux'\r\n\r\nimport state0 from './state0'\r\nimport rootReducer from './rootReducer'\r\nimport { tick } from './actions'\r\n//import * as SysClock from './SysClock'\r\n\r\nconst store = createStore(rootReducer, state0)\r\n\r\nReactDOM.render(<Provider store={store}><App /></Provider>, document.getElementById('root'));\r\n\r\n//TICK actions drive everything that depends on the passage of time\r\nsetInterval(()=>{store.dispatch(tick())}, 150)\r\n\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\n//serviceWorker.unregister();\r\n"],"sourceRoot":""}